{"version":3,"sources":["DataSource.js","rule_runner.py","thumb-up-3x.png","thumb-down-3x.png","InputDisplay.js","App.js","blank.png","thumb-up-red-3x.png","thumb-down-red-3x.png","serviceWorker.js","index.js"],"names":["firebaseConfig","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","DataSource","connect","initializeApp","database","getDatabase","auth","getAuth","signInAnonymously","dataSource","onAuthStateChanged","user","userId","uid","undefined","transferUpdates","source","target","Object","entries","key","value","InputDisplay","setEvaluate","evaluate","setRule","rule","updates","ruleUpdates","checkInputs","inputs","setGuess","guess","guessUpdates","updateInputs","ruleName","evaluateAll","toLowerCase","targetName","outputName","inputId","input","text","followsRule","output","collectUpdates","clearResults","values","followsGuess","this","RULE_EXAMPLE","App","props","localStorageAvailable","storage","window","localStorage","x","setItem","removeItem","e","handleRuleChange","ruleText","state","inputDisplay","setState","scheduleSave","handleRuleGuessChange","ruleGuess","newGuess","displayedGuess","canSave","willSave","setTimeout","saveBackup","zendoRule","zendoRuleGuess","handleInputChange","evt","newInput","handleRuleState","ruleState","writeUpdates","handleInputKeyPress","event","handleNewInput","inputIndex","length","inputsPath","gameId","dbInput","push","ref","set","author","selectedInput","handleInputSelected","parseInt","handleNewGame","dbGame","isWriter","ownerRef","child","name","playerName","role","then","registerListeners","handlePlayerNameChange","handleGameIdChange","handleGameIdKeyPress","handleJoin","pendingRef","playerRef","handleNewGuess","canSubmitGuess","handleCurrentGuess","handleSubmitGuess","guessRef","playersRef","inputsRef","dbUnsubscribes","unsubscribe","onValue","handleInputsUpdated","handlePlayersUpdated","handleGuessUpdated","snapshot","guessInfo","val","isGuessAuthor","currentGuess","playersArray","playersDisplay","playerId","display","players","dbUpdates","check_rule","gameRef","assign","update","isRuleVisible","languagePluginLoader","console","log","fetch","rule_runner","response","rule_runner_source","pyodide","runPython","selectedInputIndex","className","style","textAlign","type","placeholder","onChange","onClick","onKeyPress","mode","theme","width","fontSize","showPrintMargin","showGutter","highlightActiveLine","editorProps","$blockScrolling","Infinity","setOptions","showLineNumbers","tabSize","ruleOutput","readOnly","height","disabled","map","entry","entryIndex","checked","alt","src","thumb_up","thumb_down","toString","guessOutput","Component","Boolean","location","hostname","match","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.db7fdaba.chunk.js","sourcesContent":["// noinspection ES6CheckImport\nimport {initializeApp} from \"firebase/app\";\n// noinspection ES6CheckImport\nimport {getAuth, onAuthStateChanged, signInAnonymously} from \"firebase/auth\";\n// noinspection ES6CheckImport\nimport {getDatabase} from \"firebase/database\";\n\nconst firebaseConfig = {\n    apiKey: \"AIzaSyBzRnMig_BoFRALB0Aro-Zk3xPTTLT4DXI\",\n    authDomain: \"python-zendo.firebaseapp.com\",\n    databaseURL: \"https://python-zendo-default-rtdb.firebaseio.com\",\n    projectId: \"python-zendo\",\n    storageBucket: \"python-zendo.appspot.com\",\n    messagingSenderId: \"1078959710744\",\n    appId: \"1:1078959710744:web:f87097149476e5a148196d\",\n    measurementId: \"G-SVNXNWKY35\"\n};\n\n\nclass DataSource {\n    connect = () => {\n        // Initialize Firebase\n        initializeApp(firebaseConfig);\n        this.database = getDatabase();\n        const auth = getAuth();\n        signInAnonymously(auth);\n        let dataSource = this;\n        onAuthStateChanged(auth, (user) => {\n            if (user) {\n                // User is signed in\n                dataSource.userId = user.uid;\n            } else {\n                // User is signed out\n                dataSource.userId = undefined;\n            }\n        });\n\n    }\n}\n\nexport default DataSource;\n","export default __webpack_public_path__ + \"static/media/rule_runner.f9303f0d.py\";","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEwAACxMBAJqcGAAAANFJREFUSIntkTEKwkAQRV+0FLyAlWgl3sHC3ksIXsAz2IiNtxBtbQU7QZBUVmJtayGCqKyNwjokZhJmOz9ssZPMezu7kD9T4AaMCvRmpgO49zqHEKw9wcoa3vXgDhhaCzZC0LaE9wT8ZAkvA3shmGubS4p/BkBL1I5awa9UgT5w4fv0DjgAdS3Ib0yra9cDmPiQSIAjISiSK1D5bDRvkDc7fxNCsJQFyzdwQDOkIJZw6ytaJBUtJ2iEFGyT4JZXNEv7YDHBE6iFEtyBceZ8/6TlBQgdl09n/p+aAAAAAElFTkSuQmCC\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEwAACxMBAJqcGAAAAM9JREFUSInl0jtqQkEUBuDvpnUNwSqlSxDS29mktMsKsoVgpVV24RokjaVNbN1AyoCQSjIWIgzjVXycqfLDFPfB+e75uZCykyddeLaYOpN7gYQ/PLYNfzgnX5EGL6ceRmyQsKwNJDyVw6MqOqS1psgNvmoDRzVFVwTD8kb0Bot8SFMMbgrglvyic7iIrmiLj0tf7mCEjeMa1uhGfdVrCzCOGs6+xlUBzCIBGBTAdzTA/vfLkV408FwAb9EAzDPgswbQz4BNDQAm+MF7LeCfZQeONZqwlOGqTwAAAABJRU5ErkJggg==\"","class InputDisplay {\n    constructor() {\n        this.rule = '';\n        this.guess = '';\n        this.ruleUpdates = undefined;  // {gameChildPath: data}\n        this.guessUpdates = undefined;  // {gameChildPath: data}\n\n        // {inputId: {text: text, followsRule: bool, followsGuess: bool}}\n        this.inputs = {};\n    }\n\n    /* Set a callback evaluate(rule, input) => [isFollowed, output]. */\n    setEvaluate = (evaluate) => {\n        this.evaluate = evaluate;\n    }\n\n    /* Set the rule text, if this player wrote the rule.\n     *\n     * @param rule: rule source code\n     * @param updates: an object to hold database updates, or undefined if rule\n     *  and input results should not be updated in the database.\n     */\n    setRule = (rule, updates) => {\n        this.rule = rule;\n        this.ruleUpdates = updates;\n        const evaluateAll = true;\n        this.checkInputs(this.inputs, 'Rule', evaluateAll);\n    }\n\n    /* Set the guessed rule text, if this player wrote the guess.\n     *\n     * @param guess: guess source code\n     * @param updates: an object to hold database updates, or undefined if guess\n     *  and input results should not be updated in the database.\n     */\n    setGuess = (guess, updates) => {\n        this.guess = guess;\n        this.guessUpdates = updates;\n        const evaluateAll = true\n        this.checkInputs(this.inputs, 'Guess', evaluateAll);\n    }\n\n    /* Update inputs from database, and fill out rule results. */\n    updateInputs = (inputs) => {\n        this.checkInputs(inputs, 'Rule');\n        this.checkInputs(inputs, 'Guess');\n        this.inputs = inputs;\n    }\n    checkInputs = (inputs, ruleName, evaluateAll) => {\n        const rule = this[ruleName.toLowerCase()],\n            updates = this[ruleName.toLowerCase() + 'Updates'],\n            evaluate = rule !== '' && this.evaluate,\n            targetName = 'follows' + ruleName,\n            outputName = ruleName.toLowerCase() + 'Output';\n        for (const [inputId, input] of Object.entries(inputs)) {\n            const isNeeded = input[targetName] === undefined || evaluateAll;\n            if (isNeeded && evaluate) {\n                // noinspection JSValidateTypes\n                let [followsRule, output] = evaluate(rule, input.text);\n                if (updates === undefined) {\n                    // We display output before publishing rule or guess.\n                    input[outputName] = output;\n                }\n                else {\n                    delete input[outputName];\n                    if (followsRule !== input[targetName]) {\n                        const updatePath = 'inputs/' + inputId + '/' + targetName;\n                        updates[updatePath] = followsRule;\n                    }\n                }\n                input[targetName] = followsRule;\n            }\n        }\n    };\n\n    collectUpdates = () => {\n        const updates = {};\n        transferUpdates(this.ruleUpdates, updates);\n        transferUpdates(this.guessUpdates, updates);\n        return updates;\n    };\n\n    clearResults = () => {\n        for (const input of Object.values(this.inputs)) {\n            delete input.followsRule;\n            delete input.followsGuess;\n        }\n    };\n}\n\nfunction transferUpdates(source, target) {\n    if (source === undefined) {\n        return;\n    }\n    for (const [key, value] of Object.entries(source)) {\n        target[key] = value;\n        delete source[key];\n    }\n}\n\nexport default InputDisplay;\n","import React, {Component} from 'react';\nimport AceEditor from 'react-ace';\n// noinspection ES6CheckImport\nimport {child, onValue, push, ref, set, update} from \"firebase/database\";\n\nimport './App.css';\nimport rule_runner from './rule_runner.py';\nimport thumb_up from './thumb-up-3x.png';\nimport thumb_down from './thumb-down-3x.png';\nimport thumb_up_red from './thumb-up-red-3x.png';\nimport thumb_down_red from './thumb-down-red-3x.png';\nimport blank from './blank.png';\n\nimport 'brace/mode/python';\nimport 'brace/theme/github';\nimport InputDisplay from \"./InputDisplay\";\n\nconst RULE_EXAMPLE = `\\\ninput_text = input()\nis_rule_followed = True  # Replace this.\nprint(is_rule_followed)\n`;\n\n\nclass App extends Component {\n    constructor(props) {\n        super(props);\n        let canSave = this.localStorageAvailable(),\n            ruleText = canSave ? window.localStorage.zendoRule : '',\n            ruleGuess = canSave ? window.localStorage.zendoRuleGuess : '';\n        if (ruleText === '' || ruleText === undefined) {\n            ruleText = RULE_EXAMPLE;\n        }\n        if (ruleGuess === '' || ruleGuess === undefined) {\n            ruleGuess = RULE_EXAMPLE;\n        }\n        const inputDisplay = new InputDisplay();\n        inputDisplay.setRule(ruleText);\n        this.state = {\n            dataSource: props.dataSource,\n            gameId: '',\n            playerName: '',\n            isWriter: true,  // This player writes the secret rule.\n            isGuessAuthor: false,  // This player wrote the latest rule guess.\n            players: [],  // [{ name: name, userId: userId }]\n            rule: ruleText,\n            ruleState: 'new',  // or 'locked'\n            currentGuess: null,  // guess in database\n            newGuess: ruleGuess,  // guess being edited\n            isRuleVisible: true,\n            displayedGuess: null,  // or 'new' or 'current'\n            canSubmitGuess: false,\n            newInput: \"\",\n            selectedInput: 0,\n            canSave: canSave,\n            willSave: false,\n            dbUnsubscribes: [],\n            inputDisplay: inputDisplay\n        };\n\n        if (window.languagePluginLoader === undefined) {\n            console.log('Pyodide is not loaded.');\n        } else {\n            window.languagePluginLoader.then(function () {\n                fetch(rule_runner).then(function (response) {\n                    return response.text();\n                }).then(function (rule_runner_source) {\n                    window.pyodide.runPython(rule_runner_source);\n                });\n            });\n        }\n    }\n\n    localStorageAvailable = () => {\n        try {\n            let storage = window.localStorage,\n                x = '__storage_test__';\n            storage.setItem(x, x);\n            storage.removeItem(x);\n            return true;\n        } catch (e) {\n            return false;\n        }\n    };\n\n    handleRuleChange = ruleText => {\n        this.state.inputDisplay.setRule(ruleText);\n        this.setState({\n            rule: ruleText,\n            inputs: this.state.inputDisplay.inputs\n        })\n        this.scheduleSave();\n    };\n\n    handleRuleGuessChange = ruleGuess => {\n        this.setState({newGuess: ruleGuess});\n        if (this.state.displayedGuess === 'new') {\n            this.state.inputDisplay.setGuess(ruleGuess);\n            this.scheduleSave();\n        }\n    };\n\n    scheduleSave = () => {\n        if (this.state.canSave && !this.state.willSave) {\n            window.setTimeout(this.saveBackup, 1000);\n            this.setState({willSave: true});\n        }\n    };\n\n    saveBackup = () => {\n        window.localStorage.zendoRule = this.state.rule;\n        window.localStorage.zendoRuleGuess = this.state.newGuess;\n        this.setState({willSave: false});\n    };\n\n    handleInputChange = evt => {\n        this.setState({\n            newInput: evt.target.value\n        });\n    };\n\n    handleRuleState = () => {\n        if (this.state.ruleState === 'new') {\n            this.setState({ruleState: 'locked'});\n            this.state.inputDisplay.clearResults();\n            this.state.inputDisplay.setRule(this.state.rule, {});\n            this.writeUpdates();\n        }\n    };\n\n    handleInputKeyPress = event => {\n        if (event.key === 'Enter') {\n            this.handleNewInput();\n        }\n    };\n\n    handleNewInput = () => {\n        if (this.state.newInput === \"\") {\n            return;\n        }\n        const inputIndex = Object.values(this.state.inputDisplay.inputs).length;\n        let inputsPath = 'games/' + this.state.gameId + '/inputs';\n        let dbInput = push(ref(this.state.dataSource.database, inputsPath));\n        set(dbInput, {\n            text: this.state.newInput,\n            author: this.state.dataSource.userId\n        });\n        this.setState({\n            newInput: \"\",\n            selectedInput: inputIndex\n        });\n    };\n\n    handleInputSelected = event => {\n        this.setState({selectedInput: parseInt(event.target.value)});\n    };\n\n    handleNewGame = () => {\n        let dbGame = push(ref(this.state.dataSource.database, 'games'));\n        this.setState({gameId: dbGame.key, isWriter: true});\n        let ownerRef = child(dbGame, 'players/' + this.state.dataSource.userId);\n        set(ownerRef, {\n            name: this.state.playerName,\n            role: 'owner'\n        }).then(() => {this.registerListeners(dbGame.key);});\n    };\n\n    handlePlayerNameChange = evt => {\n        this.setState({\n            playerName: evt.target.value\n        });\n    };\n\n    handleGameIdChange = evt => {\n        this.setState({\n            gameId: evt.target.value,\n            isWriter: false\n        });\n    };\n\n    handleGameIdKeyPress = event => {\n        if (event.key === 'Enter') {\n            this.handleJoin();\n        }\n    };\n\n    handleJoin = () => {\n        let dbGame = ref(\n            this.state.dataSource.database,\n            'games/' + this.state.gameId);\n        let pendingRef = child(dbGame, 'pending/' + this.state.dataSource.userId);\n        set(pendingRef, this.state.playerName);\n        let playerRef = child(dbGame, 'players/' + this.state.dataSource.userId);\n        set(playerRef, {\n            name: this.state.playerName,\n            role: 'player'\n        }).then(() => {this.registerListeners(this.state.gameId);});\n        this.state.inputDisplay.setRule('');\n        this.setState({isWriter: false});\n    };\n\n    handleNewGuess = () => {\n        this.state.inputDisplay.setGuess(this.state.newGuess);\n        this.setState({\n            displayedGuess: 'new',\n            canSubmitGuess: true\n        });\n    };\n\n    handleCurrentGuess = () => {\n        this.state.inputDisplay.setGuess('');\n        this.setState({\n            displayedGuess: 'current',\n            canSubmitGuess: false\n        });\n    };\n\n    handleSubmitGuess = () => {\n        let guessRef = ref(\n            this.state.dataSource.database,\n            'games/' + this.state.gameId + '/guess');\n        set(guessRef,\n            {rule: this.state.newGuess, author: this.state.dataSource.userId});\n    };\n\n    registerListeners = (gameId) => {\n        let dbGame = ref(\n            this.state.dataSource.database,\n            'games/' + gameId);\n        let playersRef = child(dbGame, 'players')\n        let inputsRef = child(dbGame, 'inputs');\n        let guessRef = child(dbGame, 'guess');\n        for (let unsubscribe of this.state.dbUnsubscribes) {\n            unsubscribe();\n        }\n        let dbUnsubscribes = [];\n        dbUnsubscribes.push(onValue(inputsRef, this.handleInputsUpdated));\n        dbUnsubscribes.push(onValue(playersRef, this.handlePlayersUpdated));\n        dbUnsubscribes.push(onValue(guessRef, this.handleGuessUpdated));\n        this.setState({dbUnsubscribes: dbUnsubscribes});\n    };\n\n    handleGuessUpdated = (snapshot) => {\n        let guessInfo = snapshot.val();\n        if (guessInfo === null) {\n            guessInfo = {rule: null};\n        }\n        const isGuessAuthor = guessInfo.author === this.state.dataSource.userId;\n        if (isGuessAuthor) {\n            this.state.inputDisplay.clearResults();\n            this.state.inputDisplay.setGuess(guessInfo.rule, {});\n            this.writeUpdates();\n        }\n        else {\n            this.state.inputDisplay.setGuess('');\n        }\n        this.setState({\n            currentGuess: guessInfo.rule,\n            isGuessAuthor: isGuessAuthor\n        });\n    };\n\n    handlePlayersUpdated = (snapshot) => {\n        let playersArray = snapshot.val();\n        if (playersArray === null) {\n            playersArray = [];\n        }\n        let playersDisplay = [];\n        for (const [playerId, player] of Object.entries(playersArray)) {\n            let display = {\n                name: player.name,\n                userId: playerId\n            };\n            playersDisplay.push(display);\n        }\n        this.setState({\n            players: playersDisplay\n        });\n    };\n\n    handleInputsUpdated = (snapshot) => {\n        let inputs = snapshot.val();\n        if (inputs === null) {\n            inputs = {};\n        }\n\n        const display = this.state.inputDisplay,\n            dbUpdates = {};\n        display.setEvaluate(window.check_rule);\n        if ( ! this.state.isGuessAuthor) {\n            display.updateInputs(inputs);\n        } else {\n            display.setGuess(this.state.currentGuess, dbUpdates);\n            display.clearResults();\n            display.updateInputs(inputs);\n            if (this.state.displayedGuess === 'new') {\n                display.setGuess(this.state.newGuess);\n                display.updateInputs(inputs);\n            }\n        }\n        this.writeUpdates(dbUpdates);\n        this.setState({inputDisplay: display});\n    };\n\n    writeUpdates = (dbUpdates) => {\n        const display = this.state.inputDisplay,\n            gameRef = ref(\n                this.state.dataSource.database,\n                'games/' + this.state.gameId);\n        if (dbUpdates === undefined) {\n            dbUpdates = {};\n        }\n        Object.assign(dbUpdates, display.collectUpdates());\n\n        update(gameRef, dbUpdates);\n    };\n\n    render() {\n        const selectedInputIndex = this.state.selectedInput,\n            inputs = this.state.inputDisplay.inputs,\n            selectedInput = Object.values(inputs)[selectedInputIndex];\n        return (\n            <div className=\"App\" style={{textAlign: \"start\"}}>\n                <div>\n                    <input\n                        type=\"text\"\n                        placeholder=\"Your name\"\n                        value={this.state.playerName}\n                        onChange={this.handlePlayerNameChange}/>\n                    <button\n                        type=\"button\"\n                        onClick={this.handleNewGame}\n                        className=\"small\">Start</button>\n                    <input\n                        type=\"text\"\n                        placeholder=\"Type game id here.\"\n                        value={this.state.gameId}\n                        onChange={this.handleGameIdChange}\n                        onKeyPress={this.handleGameIdKeyPress}/>\n                    <button type=\"button\" onClick={this.handleJoin} className=\"small\">Join</button>\n                </div>\n                {this.state.isWriter && <div>\n                <AceEditor\n                    value={this.state.rule}\n                    onChange={this.handleRuleChange}\n                    mode=\"python\"\n                    theme=\"github\"\n                    width=\"100%\"\n                    fontSize={18}\n                    showPrintMargin={true}\n                    showGutter={false}\n                    highlightActiveLine={true}\n                    editorProps={{\n                        $blockScrolling: Infinity\n                    }}\n                    setOptions={{\n                        showLineNumbers: false,\n                        tabSize: 4,\n                    }}/>\n                <p>Output:</p>\n                <AceEditor\n                    value={(selectedInput && selectedInput.ruleOutput) || ''}\n                    mode=\"text\"\n                    readOnly={true}\n                    theme=\"github\"\n                    width=\"100%\"\n                    height=\"10em\"\n                    fontSize={18}\n                    showPrintMargin={true}\n                    showGutter={false}\n                    highlightActiveLine={true}\n                    editorProps={{\n                        $blockScrolling: Infinity\n                    }}\n                    setOptions={{\n                        showLineNumbers: false,\n                        tabSize: 4,\n                    }}/>\n                    <button\n                        type=\"button\"\n                        onClick={this.handleRuleState}\n                        disabled={this.state.ruleState === 'locked'}\n                        className=\"small\"\n                    >Lock Rule</button>\n                </div>}\n                <div className=\"interactions\">\n                <div className=\"inputs\">\n                {Object.values(inputs).map((entry, entryIndex) => {\n                    if (entry.followsRule === undefined && ! this.state.isWriter) {\n                        return null;\n                    }\n                    return <div key={\"item\" + entryIndex}>\n                        <label>\n                            <input type=\"radio\"\n                                   value={entryIndex}\n                                   name=\"selected_input\"\n                                   onChange={this.handleInputSelected}\n                                   checked={entryIndex === selectedInputIndex}/>\n                            <img alt={'' + entry.followsRule}\n                                 src={(entry.followsRule && thumb_up) || thumb_down}/>\n                            <pre key={\"item_text\" + entryIndex} style={{display: \"inline\"}}>{entry.text}</pre>\n                            <img alt={\n                                (entry.followsGuess !== undefined &&\n                                    entry.followsGuess).toString()}\n                                 src={(entry.followsGuess === undefined && blank) ||\n                                 ((entry.followsGuess !== entry.followsRule) &&\n                                     ((entry.followsGuess && thumb_up_red) || thumb_down_red)) ||\n                                 ((entry.followsGuess && thumb_up) || thumb_down)\n                                 }/>\n                        </label>\n                    </div>;\n                })}\n                <input\n                    type=\"text\"\n                    placeholder=\"Type input here.\"\n                    value={this.state.newInput}\n                    onChange={this.handleInputChange}\n                    onKeyPress={this.handleInputKeyPress}/>\n                <button type=\"button\" onClick={this.handleNewInput} className=\"small\">Tell</button>\n                </div>\n                <div className=\"players\">\n                    <p>Players:</p>\n                    <ul>\n                    {this.state.players.map((entry, entryIndex) => {\n                        return <li key={\"player_name\" + entryIndex}>{entry.name}</li>\n                    })}\n                    </ul>\n                </div>\n                </div>\n                <p>\n                <button\n                    type=\"button\"\n                    onClick={this.handleNewGuess}\n                    disabled={this.state.displayedGuess === 'new'}\n                    className=\"small\"\n                >New Guess</button>\n                <button\n                    type=\"button\"\n                    disabled={ ! this.state.canSubmitGuess}\n                    onClick={this.handleSubmitGuess}\n                    className=\"small\"\n                >Submit Guess</button>\n                <button\n                    type=\"button\"\n                    disabled={this.state.currentGuess === null ||\n                        this.state.displayedGuess === 'current'}\n                    onClick={this.handleCurrentGuess}\n                    className=\"small\"\n                >Current Guess</button>\n                </p>\n                {this.state.displayedGuess !== null && <div>\n                    <p>Guess the rule:</p>\n                    <AceEditor\n                        value={this.state.displayedGuess === 'new'\n                            ? this.state.newGuess\n                            : this.state.currentGuess}\n                        onChange={this.handleRuleGuessChange}\n                        mode=\"python\"\n                        readOnly={this.state.displayedGuess !== 'new'}\n                        theme=\"github\"\n                        width=\"100%\"\n                        fontSize={18}\n                        showPrintMargin={true}\n                        showGutter={false}\n                        highlightActiveLine={true}\n                        editorProps={{\n                            $blockScrolling: Infinity\n                        }}\n                        setOptions={{\n                            showLineNumbers: false,\n                            tabSize: 4,\n                        }}/>\n                <p>Output:</p>\n                <AceEditor\n                    value={selectedInput && selectedInput.guessOutput}\n                    mode=\"text\"\n                    readOnly={true}\n                    theme=\"github\"\n                    width=\"100%\"\n                    height=\"10em\"\n                    fontSize={18}\n                    showPrintMargin={true}\n                    showGutter={false}\n                    highlightActiveLine={true}\n                    editorProps={{\n                        $blockScrolling: Infinity\n                    }}\n                    setOptions={{\n                        showLineNumbers: false,\n                        tabSize: 4,\n                    }}/>\n                </div>}\n            </div>\n        );\n    }\n}\n\nexport default App;\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4wcEBBIxT2VQ/gAAAAtJREFUCNdjYAACAAAFAAHiJgWbAAAAAElFTkSuQmCC\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4wcFBhYxkDEm8QAAARdJREFUSMfdlqFOxEAQhr9tLthDjTg8Jy7hBdC8xQrMWQQJivACyHuGFeAOSXgDgiQIBOLEkUxQFwi4YtpksrkLu82uYVTb7T9f5+90to6MCCIN8AJMgVevOv1L0yQm7g9vu+QtcJiiTQJ4VYLIDDjpLrnUqpsMh06BsTlfpIhGifbsA/No6bFIBV4V4Dx6+g3wYN5NPqAXB5E94Cpafga+O3g+IIhgxNusaIGf7AqCiDNdcxZEboCjLbpj4HJXBX0eABdEWuO3Mze1DIu1Vz0Y0qapMRn6HQyKGoDr2oBlTcAGeLPtWxrwBHza9i0NWHrVr1oWfQB3Nbvo3auu4vFREnBhpm9xwNqr3qfsvS4eVhk/BI5/Gb85903wgAVIwwAAAABJRU5ErkJggg==\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4wcFBhc3YEmyhQAAAQ9JREFUSMfdlKtORDEQhr+iIJugNpNgkGCQBLEOQZAsBsw8w3kGCJKEF8Ag6nkANI+AwbPiV6ARB9MlTXP2sNm0hlGdS+dL59IQzXqSuBSW59y+hry7dDjk2KKOHESz85YAgPv08maAvWi271IzwBS4aFkigHk0m7QEHAOTvA+1AbvAWd6H2gCAk5YlAuhaA2gNWORKyJVoFlzq07kDZsD1ikS3Lt0MOfI8YUUAy0mIZs/AvAh5BU6B73Jz1yqRS79/ikuXAyEB2P4r+WgPist3hfsI2Ck/to2anJI8AF9jC7UxwCVc+gQexxaqxpg+Fa/oqgHSVL0BL8nUV120rNZXwEeaokX1FY1mYUz/n/IDtpNPiMqyz2QAAAAASUVORK5CYII=\"","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport DataSource from \"./DataSource\";\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nlet dataSource = new DataSource();\ndataSource.connect()\nReactDOM.render(<App dataSource={dataSource}/>, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}