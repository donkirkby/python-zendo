(this["webpackJsonppython-zendo"]=this["webpackJsonppython-zendo"]||[]).push([[0],{40:function(e,t,s){},50:function(e,t,s){},54:function(e,t,s){"use strict";s.r(t);var a=s(18),n=s(34),i=s.n(n),u=(s(40),s(4)),l=s(35),r=s(24),o=s(9),c={apiKey:"AIzaSyBzRnMig_BoFRALB0Aro-Zk3xPTTLT4DXI",authDomain:"python-zendo.firebaseapp.com",databaseURL:"https://python-zendo-default-rtdb.firebaseio.com",projectId:"python-zendo",storageBucket:"python-zendo.appspot.com",messagingSenderId:"1078959710744",appId:"1:1078959710744:web:f87097149476e5a148196d",measurementId:"G-SVNXNWKY35"},d=function e(){var t=this;Object(u.a)(this,e),this.connect=function(){Object(l.a)(c),t.database=Object(o.b)();var e=Object(r.a)();Object(r.c)(e);var s=t;Object(r.b)(e,(function(e){s.userId=e?e.uid:void 0}))}},A=s(12),h=s(11),p=s(5),g=s(7),b=s(6),w=s(21),m=s.n(w),j=(s(50),s.p+"static/media/rule_runner.f9303f0d.py"),v="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEwAACxMBAJqcGAAAANFJREFUSIntkTEKwkAQRV+0FLyAlWgl3sHC3ksIXsAz2IiNtxBtbQU7QZBUVmJtayGCqKyNwjokZhJmOz9ssZPMezu7kD9T4AaMCvRmpgO49zqHEKw9wcoa3vXgDhhaCzZC0LaE9wT8ZAkvA3shmGubS4p/BkBL1I5awa9UgT5w4fv0DjgAdS3Ib0yra9cDmPiQSIAjISiSK1D5bDRvkDc7fxNCsJQFyzdwQDOkIJZw6ytaJBUtJ2iEFGyT4JZXNEv7YDHBE6iFEtyBceZ8/6TlBQgdl09n/p+aAAAAAElFTkSuQmCC",y="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEwAACxMBAJqcGAAAAM9JREFUSInl0jtqQkEUBuDvpnUNwSqlSxDS29mktMsKsoVgpVV24RokjaVNbN1AyoCQSjIWIgzjVXycqfLDFPfB+e75uZCykyddeLaYOpN7gYQ/PLYNfzgnX5EGL6ceRmyQsKwNJDyVw6MqOqS1psgNvmoDRzVFVwTD8kb0Bot8SFMMbgrglvyic7iIrmiLj0tf7mCEjeMa1uhGfdVrCzCOGs6+xlUBzCIBGBTAdzTA/vfLkV408FwAb9EAzDPgswbQz4BNDQAm+MF7LeCfZQeONZqwlOGqTwAAAABJRU5ErkJggg==";s(51),s(52);function O(e,t){if(void 0!==e)for(var s=0,a=Object.entries(e);s<a.length;s++){var n=Object(A.a)(a[s],2),i=n[0],u=n[1];t[i]=u,delete e[i]}}var S=function e(){var t=this;Object(u.a)(this,e),this.setEvaluate=function(e){t.evaluate=e},this.setRule=function(e,s){t.rule=e,t.ruleUpdates=s;t.checkInputs(t.inputs,"Rule",!0)},this.setGuess=function(e,s){t.guess=e,t.guessUpdates=s;t.checkInputs(t.inputs,"Guess",!0)},this.updateInputs=function(e){t.checkInputs(e,"Rule"),t.checkInputs(e,"Guess"),t.inputs=e},this.checkInputs=function(e,s,a){for(var n=t[s.toLowerCase()],i=t[s.toLowerCase()+"Updates"],u=""!==n&&t.evaluate,l="follows"+s,r=s.toLowerCase()+"Output",o=0,c=Object.entries(e);o<c.length;o++){var d=Object(A.a)(c[o],2),h=d[0],p=d[1];if((void 0===p[l]||a)&&u){var g=u(n,p.text),b=Object(A.a)(g,2),w=b[0],m=b[1];if(void 0===i)p[r]=m;else if(delete p[r],w!==p[l])i["inputs/"+h+"/"+l]=w;p[l]=w}}},this.collectUpdates=function(){var e={};return O(t.ruleUpdates,e),O(t.guessUpdates,e),e},this.clearResults=function(){for(var e=0,s=Object.values(t.inputs);e<s.length;e++){var a=s[e];delete a.followsRule,delete a.followsGuess}},this.rule="",this.guess="",this.ruleUpdates=void 0,this.guessUpdates=void 0,this.inputs={}},f=s(8),I="input_text = input()\nis_rule_followed = True  # Replace this.\nprint(is_rule_followed)\n",G=function(e){Object(g.a)(s,e);var t=Object(b.a)(s);function s(e){var a;Object(u.a)(this,s),(a=t.call(this,e)).localStorageAvailable=function(){try{var e=window.localStorage,t="__storage_test__";return e.setItem(t,t),e.removeItem(t),!0}catch(s){return!1}},a.handleRuleChange=function(e){a.state.inputDisplay.setRule(e),a.setState({rule:e,inputs:a.state.inputDisplay.inputs}),a.scheduleSave()},a.handleRuleGuessChange=function(e){a.setState({newGuess:e}),"new"===a.state.displayedGuess&&(a.state.inputDisplay.setGuess(e),a.scheduleSave())},a.scheduleSave=function(){a.state.canSave&&!a.state.willSave&&(window.setTimeout(a.saveBackup,1e3),a.setState({willSave:!0}))},a.saveBackup=function(){window.localStorage.zendoRule=a.state.rule,window.localStorage.zendoRuleGuess=a.state.newGuess,a.setState({willSave:!1})},a.handleInputChange=function(e){a.setState({newInput:e.target.value})},a.handleRuleState=function(){"new"===a.state.ruleState&&(a.setState({ruleState:"locked"}),a.state.inputDisplay.clearResults(),a.state.inputDisplay.setRule(a.state.rule,{}),a.writeUpdates())},a.handleInputKeyPress=function(e){"Enter"===e.key&&a.handleNewInput()},a.handleNewInput=function(){if(""!==a.state.newInput){var e=Object.values(a.state.inputDisplay.inputs).length,t="games/"+a.state.gameId+"/inputs",s=Object(o.d)(Object(o.e)(a.state.dataSource.database,t));Object(o.f)(s,{text:a.state.newInput,author:a.state.dataSource.userId}),a.setState({newInput:"",selectedInput:e})}},a.handleInputSelected=function(e){a.setState({selectedInput:parseInt(e.target.value)})},a.handleNewGame=function(){var e=Object(o.d)(Object(o.e)(a.state.dataSource.database,"games"));a.setState({gameId:e.key,isWriter:!0});var t=Object(o.a)(e,"players/"+a.state.dataSource.userId);Object(o.f)(t,{name:a.state.playerName,role:"owner"}).then((function(){a.registerListeners(e.key)}))},a.handlePlayerNameChange=function(e){a.setState({playerName:e.target.value})},a.handleGameIdChange=function(e){a.setState({gameId:e.target.value,isWriter:!1})},a.handleGameIdKeyPress=function(e){"Enter"===e.key&&a.handleJoin()},a.handleJoin=function(){var e=Object(o.e)(a.state.dataSource.database,"games/"+a.state.gameId),t=Object(o.a)(e,"pending/"+a.state.dataSource.userId);Object(o.f)(t,a.state.playerName);var s=Object(o.a)(e,"players/"+a.state.dataSource.userId);Object(o.f)(s,{name:a.state.playerName,role:"player"}).then((function(){a.registerListeners(a.state.gameId)})),a.state.inputDisplay.setRule(""),a.setState({isWriter:!1})},a.handleNewGuess=function(){a.state.inputDisplay.setGuess(a.state.newGuess),a.setState({displayedGuess:"new",canSubmitGuess:!0})},a.handleCurrentGuess=function(){a.state.inputDisplay.setGuess(""),a.setState({displayedGuess:"current",canSubmitGuess:!1})},a.handleSubmitGuess=function(){var e=Object(o.e)(a.state.dataSource.database,"games/"+a.state.gameId+"/guess");Object(o.f)(e,{rule:a.state.newGuess,author:a.state.dataSource.userId})},a.registerListeners=function(e){var t,s=Object(o.e)(a.state.dataSource.database,"games/"+e),n=Object(o.a)(s,"players"),i=Object(o.a)(s,"inputs"),u=Object(o.a)(s,"guess"),l=Object(h.a)(a.state.dbUnsubscribes);try{for(l.s();!(t=l.n()).done;){(0,t.value)()}}catch(c){l.e(c)}finally{l.f()}var r=[];r.push(Object(o.c)(i,a.handleInputsUpdated)),r.push(Object(o.c)(n,a.handlePlayersUpdated)),r.push(Object(o.c)(u,a.handleGuessUpdated)),a.setState({dbUnsubscribes:r})},a.handleGuessUpdated=function(e){var t=e.val();null===t&&(t={rule:null});var s=t.author===a.state.dataSource.userId;s?(a.state.inputDisplay.clearResults(),a.state.inputDisplay.setGuess(t.rule,{}),a.writeUpdates()):a.state.inputDisplay.setGuess(""),a.setState({currentGuess:t.rule,isGuessAuthor:s})},a.handlePlayersUpdated=function(e){var t=e.val();null===t&&(t=[]);for(var s=[],n=0,i=Object.entries(t);n<i.length;n++){var u=Object(A.a)(i[n],2),l=u[0],r={name:u[1].name,userId:l};s.push(r)}a.setState({players:s})},a.handleInputsUpdated=function(e){var t=e.val();null===t&&(t={});var s=a.state.inputDisplay,n={};s.setEvaluate(window.check_rule),a.state.isGuessAuthor?(s.setGuess(a.state.currentGuess,n),s.clearResults(),s.updateInputs(t),"new"===a.state.displayedGuess&&(s.setGuess(a.state.newGuess),s.updateInputs(t))):s.updateInputs(t),a.writeUpdates(n),a.setState({inputDisplay:s})},a.writeUpdates=function(e){var t=a.state.inputDisplay,s=Object(o.e)(a.state.dataSource.database,"games/"+a.state.gameId);void 0===e&&(e={}),Object.assign(e,t.collectUpdates()),Object(o.g)(s,e)};var n=a.localStorageAvailable(),i=n?window.localStorage.zendoRule:"",l=n?window.localStorage.zendoRuleGuess:"";""!==i&&void 0!==i||(i=I),""!==l&&void 0!==l||(l=I);var r=new S;return r.setRule(i),a.state={dataSource:e.dataSource,gameId:"",playerName:"",isWriter:!0,isGuessAuthor:!1,players:[],rule:i,ruleState:"new",currentGuess:null,newGuess:l,isRuleVisible:!0,displayedGuess:null,canSubmitGuess:!1,newInput:"",selectedInput:0,canSave:n,willSave:!1,dbUnsubscribes:[],inputDisplay:r},void 0===window.languagePluginLoader?console.log("Pyodide is not loaded."):window.languagePluginLoader.then((function(){fetch(j).then((function(e){return e.text()})).then((function(e){window.pyodide.runPython(e)}))})),a}return Object(p.a)(s,[{key:"render",value:function(){var e=this,t=this.state.selectedInput,s=this.state.inputDisplay.inputs,a=Object.values(s)[t];return Object(f.jsxs)("div",{className:"App",style:{textAlign:"start"},children:[Object(f.jsxs)("div",{children:[Object(f.jsx)("input",{type:"text",placeholder:"Your name",value:this.state.playerName,onChange:this.handlePlayerNameChange}),Object(f.jsx)("button",{type:"button",onClick:this.handleNewGame,className:"small",children:"Start"}),Object(f.jsx)("input",{type:"text",placeholder:"Type game id here.",value:this.state.gameId,onChange:this.handleGameIdChange,onKeyPress:this.handleGameIdKeyPress}),Object(f.jsx)("button",{type:"button",onClick:this.handleJoin,className:"small",children:"Join"})]}),this.state.isWriter&&Object(f.jsxs)("div",{children:[Object(f.jsx)(m.a,{value:this.state.rule,onChange:this.handleRuleChange,mode:"python",theme:"github",width:"100%",fontSize:18,showPrintMargin:!0,showGutter:!1,highlightActiveLine:!0,editorProps:{$blockScrolling:1/0},setOptions:{showLineNumbers:!1,tabSize:4}}),Object(f.jsx)("p",{children:"Output:"}),Object(f.jsx)(m.a,{value:a&&a.ruleOutput||"",mode:"text",readOnly:!0,theme:"github",width:"100%",height:"10em",fontSize:18,showPrintMargin:!0,showGutter:!1,highlightActiveLine:!0,editorProps:{$blockScrolling:1/0},setOptions:{showLineNumbers:!1,tabSize:4}}),Object(f.jsx)("button",{type:"button",onClick:this.handleRuleState,disabled:"locked"===this.state.ruleState,className:"small",children:"Lock Rule"})]}),Object(f.jsxs)("div",{className:"interactions",children:[Object(f.jsxs)("div",{className:"inputs",children:[Object.values(s).map((function(s,a){return void 0!==s.followsRule||e.state.isWriter?Object(f.jsx)("div",{children:Object(f.jsxs)("label",{children:[Object(f.jsx)("input",{type:"radio",value:a,name:"selected_input",onChange:e.handleInputSelected,checked:a===t}),Object(f.jsx)("img",{alt:""+s.followsRule,src:s.followsRule?v:y}),Object(f.jsx)("pre",{style:{display:"inline"},children:s.text},"item_text"+a),Object(f.jsx)("img",{alt:(void 0!==s.followsGuess&&s.followsGuess).toString(),src:(void 0===s.followsGuess?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4wcEBBIxT2VQ/gAAAAtJREFUCNdjYAACAAAFAAHiJgWbAAAAAElFTkSuQmCC":s.followsGuess!==s.followsRule&&(s.followsGuess?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4wcFBhYxkDEm8QAAARdJREFUSMfdlqFOxEAQhr9tLthDjTg8Jy7hBdC8xQrMWQQJivACyHuGFeAOSXgDgiQIBOLEkUxQFwi4YtpksrkLu82uYVTb7T9f5+90to6MCCIN8AJMgVevOv1L0yQm7g9vu+QtcJiiTQJ4VYLIDDjpLrnUqpsMh06BsTlfpIhGifbsA/No6bFIBV4V4Dx6+g3wYN5NPqAXB5E94Cpafga+O3g+IIhgxNusaIGf7AqCiDNdcxZEboCjLbpj4HJXBX0eABdEWuO3Mze1DIu1Vz0Y0qapMRn6HQyKGoDr2oBlTcAGeLPtWxrwBHza9i0NWHrVr1oWfQB3Nbvo3auu4vFREnBhpm9xwNqr3qfsvS4eVhk/BI5/Gb85903wgAVIwwAAAABJRU5ErkJggg==":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4wcFBhc3YEmyhQAAAQ9JREFUSMfdlKtORDEQhr+iIJugNpNgkGCQBLEOQZAsBsw8w3kGCJKEF8Ag6nkANI+AwbPiV6ARB9MlTXP2sNm0hlGdS+dL59IQzXqSuBSW59y+hry7dDjk2KKOHESz85YAgPv08maAvWi271IzwBS4aFkigHk0m7QEHAOTvA+1AbvAWd6H2gCAk5YlAuhaA2gNWORKyJVoFlzq07kDZsD1ikS3Lt0MOfI8YUUAy0mIZs/AvAh5BU6B73Jz1yqRS79/ikuXAyEB2P4r+WgPist3hfsI2Ck/to2anJI8AF9jC7UxwCVc+gQexxaqxpg+Fa/oqgHSVL0BL8nUV120rNZXwEeaokX1FY1mYUz/n/IDtpNPiMqyz2QAAAAASUVORK5CYII="))||s.followsGuess&&v||y})]})},"item"+a):null})),Object(f.jsx)("input",{type:"text",placeholder:"Type input here.",value:this.state.newInput,onChange:this.handleInputChange,onKeyPress:this.handleInputKeyPress}),Object(f.jsx)("button",{type:"button",onClick:this.handleNewInput,className:"small",children:"Tell"})]}),Object(f.jsxs)("div",{className:"players",children:[Object(f.jsx)("p",{children:"Players:"}),Object(f.jsx)("ul",{children:this.state.players.map((function(e,t){return Object(f.jsx)("li",{children:e.name},"player_name"+t)}))})]})]}),Object(f.jsxs)("p",{children:[Object(f.jsx)("button",{type:"button",onClick:this.handleNewGuess,disabled:"new"===this.state.displayedGuess,className:"small",children:"New Guess"}),Object(f.jsx)("button",{type:"button",disabled:!this.state.canSubmitGuess,onClick:this.handleSubmitGuess,className:"small",children:"Submit Guess"}),Object(f.jsx)("button",{type:"button",disabled:null===this.state.currentGuess||"current"===this.state.displayedGuess,onClick:this.handleCurrentGuess,className:"small",children:"Current Guess"})]}),null!==this.state.displayedGuess&&Object(f.jsxs)("div",{children:[Object(f.jsx)("p",{children:"Guess the rule:"}),Object(f.jsx)(m.a,{value:"new"===this.state.displayedGuess?this.state.newGuess:this.state.currentGuess,onChange:this.handleRuleGuessChange,mode:"python",readOnly:"new"!==this.state.displayedGuess,theme:"github",width:"100%",fontSize:18,showPrintMargin:!0,showGutter:!1,highlightActiveLine:!0,editorProps:{$blockScrolling:1/0},setOptions:{showLineNumbers:!1,tabSize:4}}),Object(f.jsx)("p",{children:"Output:"}),Object(f.jsx)(m.a,{value:a&&a.guessOutput,mode:"text",readOnly:!0,theme:"github",width:"100%",height:"10em",fontSize:18,showPrintMargin:!0,showGutter:!1,highlightActiveLine:!0,editorProps:{$blockScrolling:1/0},setOptions:{showLineNumbers:!1,tabSize:4}})]})]})}}]),s}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var C=new d;C.connect(),i.a.render(Object(f.jsx)(G,{dataSource:C}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[54,1,2]]]);
//# sourceMappingURL=main.db7fdaba.chunk.js.map